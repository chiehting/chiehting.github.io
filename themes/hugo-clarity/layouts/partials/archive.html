{{ $pages := .Pages }}
{{ if .IsHome }}
  {{ $pages = where ( where ( where site.RegularPages "Type" "in" site.Params.mainSections ) "Title" "!=" "" ) ".Params.post" "!=" false  }}
{{ end }}
<div class="grid-inverse wrap content">
  <ul class="posts" id="posts">
    {{- range (.Paginate $pages).Pages }}
      {{ partial "excerpt" . }}
    {{- end }}
    <li>
      {{- template "_internal/pagination.html" . }}
    </li>
  </ul>
  {{- partial "sidebar" . }}
</div>
