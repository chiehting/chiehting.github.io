<!doctype html><html lang=en-us><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1C48BPHVP"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1C48BPHVP")}</script><meta charset=UTF-8><meta charset=utf-8><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimal-ui"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="index, follow"><meta name=author content><meta name=description content="This website is preview about Chiehting. irregular update."><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="Chiehting's Blog"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="rfc6265"><meta itemprop=description content="文章是在導讀 Set-Cookie header fields 規範以及重要屬性。"><meta itemprop=datePublished content="2024-02-16T11:28:57+08:00"><meta itemprop=dateModified content="2024-02-16T11:28:57+08:00"><meta itemprop=wordCount content="2072"><meta itemprop=keywords content="Internet,Ietf,Rfc"><meta property="og:url" content="https://chiehting.com/posts/internet-rfc-6265-server-requirements/"><meta property="og:site_name" content="Chiehting's Blog"><meta property="og:title" content="rfc6265"><meta property="og:description" content="文章是在導讀 Set-Cookie header fields 規範以及重要屬性。"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-16T11:28:57+08:00"><meta property="article:modified_time" content="2024-02-16T11:28:57+08:00"><meta property="article:tag" content="Internet"><meta property="article:tag" content="Ietf"><meta property="article:tag" content="Rfc"><meta name=twitter:card content="summary"><meta name=twitter:title content="rfc6265"><meta name=twitter:description content="文章是在導讀 Set-Cookie header fields 規範以及重要屬性。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"rfc6265","name":"rfc6265","description":"文章是在導讀 Set-Cookie header fields 規範以及重要屬性。\n","keywords":["internet","ietf","rfc"],"articleBody":"文章是在導讀 Set-Cookie header fields 規範以及重要屬性。\nReferances HTTP State Management Mechanism\nSummary 第四章節是在說明 Set-Cookie 的方式，其中關鍵字為 Set-Cookie，將 Set-Cookie 加到 response header 內容中，其格式是使用 name-value-pair，並返回給 user agent。\nuser agent 收到 Set-Cookie 後會保存其資料，如果該資料已經存在則會覆蓋。這邊也建議伺服器將資料內容做編碼，例如 base64。\n在 4.1.2 的章節中有幾個重要的屬性，條列如下：\n4.1.2.1. The Expires Attribute：定義 Cookies 的過期時間，過期後則不保留 cookie。\n4.1.2.2. The Max-Age Attribute：定義 Cookies 的保留日期，過期後則不保留 cookie。\n4.1.2.3. The Domain Attribute：定義 Cookies 的域名。\nFor example, if the value of the Domain attribute is “example.com”, the user agent will include the cookie in the Cookie header when making HTTP requests to example.com, www.example.com, and www.corp.example.com.\n4.1.2.4. The Path Attribute：定義 Cookies 的路徑。配置 Path Attribute 後，就只會在指定的路徑中做 Cookies 的交互。\n4.1.2.5. The Secure Attribute：限制 Cookies 只能在 “安全” 頻道中做傳輸。配置 Secure Attribute 後，就只能在 HTTPS 的請求中做 Cookies 的交互。\n4.1.2.6. The HttpOnly Attribute：限制 Cookies 的存取方式。配置 HttpOnly Attribute 後，就只能使用 http 請求做 Cookies 的存取，否則會被省略，例如無法使用 javascript 來存取 Cookies 的內容。\nNote 原文 :: rfc6265\n4. Server Requirements This section describes the syntax and semantics of a well-behaved profile of the Cookie and Set-Cookie headers.\n4.1. Set-Cookie\nThe Set-Cookie HTTP response header is used to send cookies from the server to the user agent.\n4.1.1. Syntax\nInformally, the Set-Cookie response header contains the header name “Set-Cookie” followed by a “:” and a cookie. Each cookie begins with a name-value-pair, followed by zero or more attribute-value pairs. Servers SHOULD NOT send Set-Cookie headers that fail to conform to the following grammar:\nset-cookie-header = \"Set-Cookie:\" SP set-cookie-string set-cookie-string = cookie-pair *( \";\" SP cookie-av ) cookie-pair = cookie-name \"=\" cookie-value cookie-name = token cookie-value = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE ) cookie-octet = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E ; US-ASCII characters excluding CTLs, ; whitespace DQUOTE, comma, semicolon, ; and backslash token = \u003ctoken, defined in [RFC2616], Section 2.2\u003e cookie-av = expires-av / max-age-av / domain-av / path-av / secure-av / httponly-av / extension-av expires-av = \"Expires=\" sane-cookie-date sane-cookie-date = \u003crfc1123-date, defined in [RFC2616], Section 3.3.1\u003e max-age-av = \"Max-Age=\" non-zero-digit *DIGIT ; In practice, both expires-av and max-age-av ; are limited to dates representable by the ; user agent. non-zero-digit = %x31-39 ; digits 1 through 9 domain-av = \"Domain=\" domain-value domain-value = \u003csubdomain\u003e ; defined in [RFC1034], Section 3.5, as ; enhanced by [RFC1123], Section 2.1 path-av = \"Path=\" path-value path-value = \u003cany CHAR except CTLs or \";\"\u003e secure-av = \"Secure\" httponly-av = \"HttpOnly\" extension-av = \u003cany CHAR except CTLs or \";\"\u003e Note that some of the grammatical terms above reference documents that use different grammatical notations than this document (which uses ABNF from [RFC5234]).\nThe semantics of the cookie-value are not defined by this document.\nTo maximize compatibility with user agents, servers that wish to store arbitrary data in a cookie-value SHOULD encode that data, for example, using Base64 [RFC4648].\nThe portions of the set-cookie-string produced by the cookie-av term are known as attributes. To maximize compatibility with user agents, servers SHOULD NOT produce two attributes with the same name in the same set-cookie-string. (See Section 5.3 for how user agents handle this case.)\nServers SHOULD NOT include more than one Set-Cookie header field in the same response with the same cookie-name. (See Section 5.2 for how user agents handle this case.)\nIf a server sends multiple responses containing Set-Cookie headers concurrently to the user agent (e.g., when communicating with the user agent over multiple sockets), these responses create a “race condition” that can lead to unpredictable behavior.\nNOTE: Some existing user agents differ in their interpretation of two-digit years. To avoid compatibility issues, servers SHOULD use the rfc1123-date format, which requires a four-digit year.\nNOTE: Some user agents store and process dates in cookies as 32-bit UNIX time_t values. Implementation bugs in the libraries supporting time_t processing on some systems might cause such user agents to process dates after the year 2038 incorrectly.\n4.1.2. Semantics (Non-Normative)\nThis section describes simplified semantics of the Set-Cookie header. These semantics are detailed enough to be useful for understanding the most common uses of cookies by servers. The full semantics are described in Section 5.\nWhen the user agent receives a Set-Cookie header, the user agent stores the cookie together with its attributes. Subsequently, when the user agent makes an HTTP request, the user agent includes the applicable, non-expired cookies in the Cookie header.\nIf the user agent receives a new cookie with the same cookie-name, domain-value, and path-value as a cookie that it has already stored, the existing cookie is evicted and replaced with the new cookie. Notice that servers can delete cookies by sending the user agent a new cookie with an Expires attribute with a value in the past.\nUnless the cookie’s attributes indicate otherwise, the cookie is returned only to the origin server (and not, for example, to any subdomains), and it expires at the end of the current session (as defined by the user agent). User agents ignore unrecognized cookie attributes (but not the entire cookie).\n4.1.2.1. The Expires Attribute\nThe Expires attribute indicates the maximum lifetime of the cookie, represented as the date and time at which the cookie expires. The user agent is not required to retain the cookie until the specified date has passed. In fact, user agents often evict cookies due to memory pressure or privacy concerns.\n4.1.2.2. The Max-Age Attribute\nThe Max-Age attribute indicates the maximum lifetime of the cookie, represented as the number of seconds until the cookie expires. The user agent is not required to retain the cookie for the specified duration. In fact, user agents often evict cookies due to memory pressure or privacy concerns.\nNOTE: Some existing user agents do not support the Max-Age attribute. User agents that do not support the Max-Age attribute ignore the attribute. If a cookie has both the Max-Age and the Expires attribute, the Max- Age attribute has precedence and controls the expiration date of the cookie. If a cookie has neither the Max-Age nor the Expires attribute, the user agent will retain the cookie until “the current session is over” (as defined by the user agent).\n4.1.2.3. The Domain Attribute\nThe Domain attribute specifies those hosts to which the cookie will be sent. For example, if the value of the Domain attribute is “example.com”, the user agent will include the cookie in the Cookie header when making HTTP requests to example.com, www.example.com, and www.corp.example.com. (Note that a leading %x2E (\".\"), if present, is ignored even though that character is not permitted, but a trailing %x2E (\".\"), if present, will cause the user agent to ignore the attribute.) If the server omits the Domain attribute, the user agent will return the cookie only to the origin server.\nWARNING: Some existing user agents treat an absent Domain attribute as if the Domain attribute were present and contained the current host name. For example, if example.com returns a Set- Cookie header without a Domain attribute, these user agents will erroneously send the cookie to www.example.com as well. The user agent will reject cookies unless the Domain attribute specifies a scope for the cookie that would include the origin server. For example, the user agent will accept a cookie with a Domain attribute of “example.com” or of “foo.example.com” from foo.example.com, but the user agent will not accept a cookie with a Domain attribute of “bar.example.com” or of “baz.foo.example.com”.\nNOTE: For security reasons, many user agents are configured to reject Domain attributes that correspond to “public suffixes”. For example, some user agents will reject Domain attributes of “com” or “co.uk”. (See Section 5.3 for more information.)\n4.1.2.4. The Path Attribute\nThe scope of each cookie is limited to a set of paths, controlled by the Path attribute. If the server omits the Path attribute, the user agent will use the “directory” of the request-uri’s path component as the default value. (See Section 5.1.4 for more details.)\nThe user agent will include the cookie in an HTTP request only if the path portion of the request-uri matches (or is a subdirectory of) the cookie’s Path attribute, where the %x2F (\"/\") character is interpreted as a directory separator.\nAlthough seemingly useful for isolating cookies between different paths within a given host, the Path attribute cannot be relied upon for security (see Section 8).\n4.1.2.5. The Secure Attribute\nThe Secure attribute limits the scope of the cookie to “secure” channels (where “secure” is defined by the user agent). When a cookie has the Secure attribute, the user agent will include the cookie in an HTTP request only if the request is transmitted over a secure channel (typically HTTP over Transport Layer Security (TLS) [RFC2818]).\nAlthough seemingly useful for protecting cookies from active network attackers, the Secure attribute protects only the cookie’s confidentiality. An active network attacker can overwrite Secure cookies from an insecure channel, disrupting their integrity (see Section 8.6 for more details).\n4.1.2.6. The HttpOnly Attribute\nThe HttpOnly attribute limits the scope of the cookie to HTTP requests. In particular, the attribute instructs the user agent to omit the cookie when providing access to cookies via “non-HTTP” APIs (such as a web browser API that exposes cookies to scripts).\nNote that the HttpOnly attribute is independent of the Secure attribute: a cookie can have both the HttpOnly and the Secure attribute.\n4.2. Cookie\n4.2.1. Syntax\nThe user agent sends stored cookies to the origin server in the Cookie header. If the server conforms to the requirements in Section 4.1 (and the user agent conforms to the requirements in Section 5), the user agent will send a Cookie header that conforms to the following grammar:\ncookie-header = “Cookie:” OWS cookie-string OWS cookie-string = cookie-pair *( “;” SP cookie-pair )\n4.2.2. Semantics\nEach cookie-pair represents a cookie stored by the user agent. The cookie-pair contains the cookie-name and cookie-value the user agent received in the Set-Cookie header.\nNotice that the cookie attributes are not returned. In particular, the server cannot determine from the Cookie header alone when a cookie will expire, for which hosts the cookie is valid, for which paths the cookie is valid, or whether the cookie was set with the Secure or HttpOnly attributes.\nThe semantics of individual cookies in the Cookie header are not defined by this document. Servers are expected to imbue these cookies with application-specific semantics.\nAlthough cookies are serialized linearly in the Cookie header, servers SHOULD NOT rely upon the serialization order. In particular, if the Cookie header contains two cookies with the same name (e.g., that were set with different Path or Domain attributes), servers SHOULD NOT rely upon the order in which these cookies appear in the header.\n","wordCount":"2072","inLanguage":"en","datePublished":"2024-02-16T11:28:57+08:00","dateModified":"2024-02-16T11:28:57+08:00","author":{"@type":"Person","name":null},"mainEntityOfPage":{"@type":"WebPage","@id":"https://chiehting.com/posts/internet-rfc-6265-server-requirements/"},"publisher":{"@type":"Organization","name":"Chiehting's Blog","description":"This website is preview about Chiehting. irregular update.","logo":{"@type":"ImageObject","url":"https://chiehting.com/favicon.ico"}}}</script><title>rfc6265</title><link rel="stylesheet dns-prefetch preconnect preload prefetch" as=style media=screen href=https://chiehting.com/css/style.min.4a728eca217aff37d24d94ea492de99e69fea0a53bb05c836db76b9d0504ef60.css integrity="sha256-SnKOyiF6/zfSTZTqSS3pnmn+oKU7sFyDbbdrnQUE72A=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://chiehting.com/>Chiehting's Blog</a></div><nav class="site-nav hide-in-mobile"><a href=https://chiehting.com/posts/>Posts</a><a href=https://chiehting.com/about/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-links hide-in-mobile"><a href=ting911111@gmail.com target=_blank rel="noopener me" title=Email><svg class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a href=https://github.com/chiehting target=_blank rel="noopener me" title=Github><svg class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://chiehting.com/posts/>Posts</a></li><li><a href=https://chiehting.com/about/>About</a></li></ul></div><main class="site-main section-inner thin animated fadeIn faster"><h1>rfc6265</h1><div class=content><p>文章是在導讀 Set-Cookie header fields 規範以及重要屬性。</p><h3 id=referances>Referances<a href=#referances class=anchor aria-hidden=true><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p><a href=https://www.rfc-editor.org/rfc/rfc6265.html#section-4>HTTP State Management Mechanism</a></p><h3 id=summary>Summary<a href=#summary class=anchor aria-hidden=true><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>第四章節是在說明 Set-Cookie 的方式，其中關鍵字為 <code>Set-Cookie</code>，將 Set-Cookie 加到 response header 內容中，其格式是使用 name-value-pair，並返回給 user agent。</p><p>user agent 收到 Set-Cookie 後會保存其資料，如果該資料已經存在則會覆蓋。這邊也建議伺服器將資料內容做編碼，例如 base64。</p><p>在 4.1.2 的章節中有幾個重要的屬性，條列如下：</p><p>4.1.2.1. The Expires Attribute：定義 Cookies 的過期時間，過期後則不保留 cookie。</p><p>4.1.2.2. The Max-Age Attribute：定義 Cookies 的保留日期，過期後則不保留 cookie。</p><p>4.1.2.3. The Domain Attribute：定義 Cookies 的域名。</p><blockquote><p>For example, if the value of the Domain attribute is
&ldquo;example.com&rdquo;, the user agent will include the cookie in the Cookie
header when making HTTP requests to example.com, <a href=https://www.example.com>www.example.com</a>, and
<a href=https://www.corp.example.com>www.corp.example.com</a>.</p></blockquote><p>4.1.2.4. The Path Attribute：定義 Cookies 的路徑。配置 Path Attribute 後，就只會在指定的路徑中做 Cookies 的交互。</p><p>4.1.2.5. The Secure Attribute：限制 Cookies 只能在 &ldquo;安全&rdquo; 頻道中做傳輸。配置 Secure Attribute 後，就只能在 HTTPS 的請求中做 Cookies 的交互。</p><p>4.1.2.6. The HttpOnly Attribute：限制 Cookies 的存取方式。配置 HttpOnly Attribute 後，就只能使用 http 請求做 Cookies 的存取，否則會被省略，例如無法使用 javascript 來存取 Cookies 的內容。</p><h3 id=note>Note<a href=#note class=anchor aria-hidden=true><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><p>原文 :: <a href=https://www.rfc-editor.org/rfc/rfc6265.html#section-4>rfc6265</a></p><h4 id=4-server-requirements>4. Server Requirements<a href=#4-server-requirements class=anchor aria-hidden=true><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h4><p>This section describes the syntax and semantics of a well-behaved
profile of the Cookie and Set-Cookie headers.</p><p>4.1. Set-Cookie</p><p>The Set-Cookie HTTP response header is used to send cookies from the
server to the user agent.</p><p>4.1.1. Syntax</p><p>Informally, the Set-Cookie response header contains the header name
&ldquo;Set-Cookie&rdquo; followed by a &ldquo;:&rdquo; and a cookie. Each cookie begins with
a name-value-pair, followed by zero or more attribute-value pairs.
Servers SHOULD NOT send Set-Cookie headers that fail to conform to
the following grammar:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>set-cookie-header = &#34;Set-Cookie:&#34; SP set-cookie-string
</span></span><span class=line><span class=cl>set-cookie-string = cookie-pair *( &#34;;&#34; SP cookie-av )
</span></span><span class=line><span class=cl>cookie-pair       = cookie-name &#34;=&#34; cookie-value
</span></span><span class=line><span class=cl>cookie-name       = token
</span></span><span class=line><span class=cl>cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )
</span></span><span class=line><span class=cl>cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E
</span></span><span class=line><span class=cl>                    ; US-ASCII characters excluding CTLs,
</span></span><span class=line><span class=cl>                    ; whitespace DQUOTE, comma, semicolon,
</span></span><span class=line><span class=cl>                    ; and backslash
</span></span><span class=line><span class=cl>token             = <span class=p>&lt;</span><span class=nt>token</span><span class=err>,</span> <span class=na>defined</span> <span class=na>in</span> <span class=err>[</span><span class=na>RFC2616</span><span class=err>],</span> <span class=na>Section</span> <span class=na>2</span><span class=err>.</span><span class=na>2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cookie-av         = expires-av / max-age-av / domain-av /
</span></span><span class=line><span class=cl>                  path-av / secure-av / httponly-av /
</span></span><span class=line><span class=cl>                  extension-av
</span></span><span class=line><span class=cl>expires-av        = &#34;Expires=&#34; sane-cookie-date
</span></span><span class=line><span class=cl>sane-cookie-date  = <span class=p>&lt;</span><span class=nt>rfc1123-date</span><span class=err>,</span> <span class=na>defined</span> <span class=na>in</span> <span class=err>[</span><span class=na>RFC2616</span><span class=err>],</span> <span class=na>Section</span> <span class=na>3</span><span class=err>.</span><span class=na>3</span><span class=err>.</span><span class=na>1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>max-age-av        = &#34;Max-Age=&#34; non-zero-digit *DIGIT
</span></span><span class=line><span class=cl>                    ; In practice, both expires-av and max-age-av
</span></span><span class=line><span class=cl>                    ; are limited to dates representable by the
</span></span><span class=line><span class=cl>                    ; user agent.
</span></span><span class=line><span class=cl>non-zero-digit    = %x31-39
</span></span><span class=line><span class=cl>                    ; digits 1 through 9
</span></span><span class=line><span class=cl>domain-av         = &#34;Domain=&#34; domain-value
</span></span><span class=line><span class=cl>domain-value      = <span class=p>&lt;</span><span class=nt>subdomain</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    ; defined in [RFC1034], Section 3.5, as
</span></span><span class=line><span class=cl>                    ; enhanced by [RFC1123], Section 2.1
</span></span><span class=line><span class=cl>path-av           = &#34;Path=&#34; path-value
</span></span><span class=line><span class=cl>path-value        = <span class=p>&lt;</span><span class=nt>any</span> <span class=na>CHAR</span> <span class=na>except</span> <span class=na>CTLs</span> <span class=na>or</span> <span class=err>&#34;;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>secure-av         = &#34;Secure&#34;
</span></span><span class=line><span class=cl>httponly-av       = &#34;HttpOnly&#34;
</span></span><span class=line><span class=cl>extension-av      = <span class=p>&lt;</span><span class=nt>any</span> <span class=na>CHAR</span> <span class=na>except</span> <span class=na>CTLs</span> <span class=na>or</span> <span class=err>&#34;;&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Note that some of the grammatical terms above reference documents
that use different grammatical notations than this document (which
uses ABNF from [RFC5234]).</p><p>The semantics of the cookie-value are not defined by this document.</p><p>To maximize compatibility with user agents, servers that wish to
store arbitrary data in a cookie-value SHOULD encode that data, for
example, using Base64 [RFC4648].</p><p>The portions of the set-cookie-string produced by the cookie-av term
are known as attributes. To maximize compatibility with user agents,
servers SHOULD NOT produce two attributes with the same name in the
same set-cookie-string. (See Section 5.3 for how user agents handle
this case.)</p><p>Servers SHOULD NOT include more than one Set-Cookie header field in
the same response with the same cookie-name. (See Section 5.2 for
how user agents handle this case.)</p><p>If a server sends multiple responses containing Set-Cookie headers
concurrently to the user agent (e.g., when communicating with the
user agent over multiple sockets), these responses create a &ldquo;race
condition&rdquo; that can lead to unpredictable behavior.</p><p>NOTE: Some existing user agents differ in their interpretation of
two-digit years. To avoid compatibility issues, servers SHOULD use
the rfc1123-date format, which requires a four-digit year.</p><p>NOTE: Some user agents store and process dates in cookies as 32-bit
UNIX time_t values. Implementation bugs in the libraries supporting
time_t processing on some systems might cause such user agents to
process dates after the year 2038 incorrectly.</p><p>4.1.2. Semantics (Non-Normative)</p><p>This section describes simplified semantics of the Set-Cookie header.
These semantics are detailed enough to be useful for understanding
the most common uses of cookies by servers. The full semantics are
described in Section 5.</p><p>When the user agent receives a Set-Cookie header, the user agent
stores the cookie together with its attributes. Subsequently, when
the user agent makes an HTTP request, the user agent includes the
applicable, non-expired cookies in the Cookie header.</p><p>If the user agent receives a new cookie with the same cookie-name,
domain-value, and path-value as a cookie that it has already stored,
the existing cookie is evicted and replaced with the new cookie.
Notice that servers can delete cookies by sending the user agent a
new cookie with an Expires attribute with a value in the past.</p><p>Unless the cookie&rsquo;s attributes indicate otherwise, the cookie is
returned only to the origin server (and not, for example, to any
subdomains), and it expires at the end of the current session (as
defined by the user agent). User agents ignore unrecognized cookie
attributes (but not the entire cookie).</p><p>4.1.2.1. The Expires Attribute</p><p>The Expires attribute indicates the maximum lifetime of the cookie,
represented as the date and time at which the cookie expires. The
user agent is not required to retain the cookie until the specified
date has passed. In fact, user agents often evict cookies due to
memory pressure or privacy concerns.</p><p>4.1.2.2. The Max-Age Attribute</p><p>The Max-Age attribute indicates the maximum lifetime of the cookie,
represented as the number of seconds until the cookie expires. The
user agent is not required to retain the cookie for the specified
duration. In fact, user agents often evict cookies due to memory
pressure or privacy concerns.</p><pre><code>  NOTE: Some existing user agents do not support the Max-Age
  attribute.  User agents that do not support the Max-Age attribute
  ignore the attribute.
</code></pre><p>If a cookie has both the Max-Age and the Expires attribute, the Max-
Age attribute has precedence and controls the expiration date of the
cookie. If a cookie has neither the Max-Age nor the Expires
attribute, the user agent will retain the cookie until &ldquo;the current
session is over&rdquo; (as defined by the user agent).</p><p>4.1.2.3. The Domain Attribute</p><p>The Domain attribute specifies those hosts to which the cookie will
be sent. For example, if the value of the Domain attribute is
&ldquo;example.com&rdquo;, the user agent will include the cookie in the Cookie
header when making HTTP requests to example.com, <a href=https://www.example.com>www.example.com</a>, and
<a href=https://www.corp.example.com>www.corp.example.com</a>. (Note that a leading %x2E ("."), if present,
is ignored even though that character is not permitted, but a
trailing %x2E ("."), if present, will cause the user agent to ignore
the attribute.) If the server omits the Domain attribute, the user
agent will return the cookie only to the origin server.</p><pre><code>  WARNING: Some existing user agents treat an absent Domain
  attribute as if the Domain attribute were present and contained
  the current host name.  For example, if example.com returns a Set-
  Cookie header without a Domain attribute, these user agents will
  erroneously send the cookie to www.example.com as well.
</code></pre><p>The user agent will reject cookies unless the Domain attribute
specifies a scope for the cookie that would include the origin
server. For example, the user agent will accept a cookie with a
Domain attribute of &ldquo;example.com&rdquo; or of &ldquo;foo.example.com&rdquo; from
foo.example.com, but the user agent will not accept a cookie with a
Domain attribute of &ldquo;bar.example.com&rdquo; or of &ldquo;baz.foo.example.com&rdquo;.</p><p>NOTE: For security reasons, many user agents are configured to reject
Domain attributes that correspond to &ldquo;public suffixes&rdquo;. For example,
some user agents will reject Domain attributes of &ldquo;com&rdquo; or &ldquo;co.uk&rdquo;.
(See Section 5.3 for more information.)</p><p>4.1.2.4. The Path Attribute</p><p>The scope of each cookie is limited to a set of paths, controlled by
the Path attribute. If the server omits the Path attribute, the user
agent will use the &ldquo;directory&rdquo; of the request-uri&rsquo;s path component as
the default value. (See Section 5.1.4 for more details.)</p><p>The user agent will include the cookie in an HTTP request only if the
path portion of the request-uri matches (or is a subdirectory of) the
cookie&rsquo;s Path attribute, where the %x2F ("/") character is
interpreted as a directory separator.</p><p>Although seemingly useful for isolating cookies between different
paths within a given host, the Path attribute cannot be relied upon
for security (see Section 8).</p><p>4.1.2.5. The Secure Attribute</p><p>The Secure attribute limits the scope of the cookie to &ldquo;secure&rdquo;
channels (where &ldquo;secure&rdquo; is defined by the user agent). When a
cookie has the Secure attribute, the user agent will include the
cookie in an HTTP request only if the request is transmitted over a
secure channel (typically HTTP over Transport Layer Security (TLS)
[RFC2818]).</p><p>Although seemingly useful for protecting cookies from active network
attackers, the Secure attribute protects only the cookie&rsquo;s
confidentiality. An active network attacker can overwrite Secure
cookies from an insecure channel, disrupting their integrity (see
Section 8.6 for more details).</p><p>4.1.2.6. The HttpOnly Attribute</p><p>The HttpOnly attribute limits the scope of the cookie to HTTP
requests. In particular, the attribute instructs the user agent to
omit the cookie when providing access to cookies via &ldquo;non-HTTP&rdquo; APIs
(such as a web browser API that exposes cookies to scripts).</p><p>Note that the HttpOnly attribute is independent of the Secure
attribute: a cookie can have both the HttpOnly and the Secure
attribute.</p><p>4.2. Cookie</p><p>4.2.1. Syntax</p><p>The user agent sends stored cookies to the origin server in the
Cookie header. If the server conforms to the requirements in
Section 4.1 (and the user agent conforms to the requirements in
Section 5), the user agent will send a Cookie header that conforms to
the following grammar:</p><p>cookie-header = &ldquo;Cookie:&rdquo; OWS cookie-string OWS
cookie-string = cookie-pair *( &ldquo;;&rdquo; SP cookie-pair )</p><p>4.2.2. Semantics</p><p>Each cookie-pair represents a cookie stored by the user agent. The
cookie-pair contains the cookie-name and cookie-value the user agent
received in the Set-Cookie header.</p><p>Notice that the cookie attributes are not returned. In particular,
the server cannot determine from the Cookie header alone when a
cookie will expire, for which hosts the cookie is valid, for which
paths the cookie is valid, or whether the cookie was set with the
Secure or HttpOnly attributes.</p><p>The semantics of individual cookies in the Cookie header are not
defined by this document. Servers are expected to imbue these
cookies with application-specific semantics.</p><p>Although cookies are serialized linearly in the Cookie header,
servers SHOULD NOT rely upon the serialization order. In particular,
if the Cookie header contains two cookies with the same name (e.g.,
that were set with different Path or Domain attributes), servers
SHOULD NOT rely upon the order in which these cookies appear in the
header.</p></div><div class="human single"><a href=https://brainmade.org/ target=_blank rel="external noreferrer noopener"><abbr title="I don't hate AIs; but I love humans!"><svg fill="#fff" width="128" height="40" viewBox="0 0 128 40"><path d="M26.306 39.391H11.665a1.28 1.28.0 01-1.28-1.28v-3.838H6.399a1.28 1.28.0 01-1.28-1.28v-5.336l-4.41-2.198a1.28 1.28.0 01-.493-1.855l4.904-7.357v-2.175C5.12 6.298 11.422.0 19.194.0s14.073 6.3 14.075 14.071c-.316 13.912-5.38 11.758-5.59 17.023l-.093 7.018a1.3 1.3.0 01-.375.905 1.27 1.27.0 01-.905.375zm-13.361-2.559h12.082l.143-7.27c-.132-3.329 5.858-4.122 5.54-15.368-.179-6.356-5.157-11.635-11.515-11.635S7.68 7.713 7.679 14.071v2.559c-.001.253-.075.5-.215.71l-4.315 6.471 3.822 1.91a1.28 1.28.0 01.708 1.145v4.848h3.987a1.28 1.28.0 011.28 1.28z"/><path d="M20.186 29.111v-9.644c.059.0.118.009.177.009 4.885-.006 8.525-4.506 7.511-9.284a1.19 1.19.0 00-.911-.911 7.67 7.67.0 00-9.049 5.67l-.033-.036a7.66 7.66.0 00-7.03-2.085 1.19 1.19.0 00-.911.91c-1.014 4.777 2.627 9.277 7.51 9.284.118.0.246-.014.369-.02v6.106zm1.419-16.072a5.33 5.33.0 014.062-1.553 5.33 5.33.0 01-5.614 5.615 5.3 5.3.0 011.552-4.061zm-7.904 6.057a5.3 5.3.0 01-1.559-4.061 5.323 5.323.0 015.614 5.615 5.3 5.3.0 01-4.055-1.554m38.419-6.79q0 2.346-1.567 3.63-1.567 1.282-4.351 1.283h-7.669V0h7.016q2.807.0 4.242 1.1 1.446 1.087 1.446 3.226.0 1.467-.729 2.481-.718 1.002-2.197 1.357 1.86.244 2.828 1.32.979 1.063.979 2.823zm-4.112-7.491q0-1.161-.663-1.65-.652-.488-1.947-.488h-3.655v4.265h3.677q1.36.0 1.968-.525.62-.537.62-1.601m.892 7.209q0-2.42-3.089-2.42h-4.069v4.938h4.188q1.545.0 2.252-.624.718-.635.718-1.894m16.26 5.194-3.557-6.538h-3.764v6.538H54.63V0h7.658q2.741.0 4.231 1.332 1.49 1.32 1.49 3.8.0 1.808-.913 3.128-.914 1.308-2.47 1.723l4.144 7.235zm-.381-11.94q0-2.481-2.828-2.481h-4.112v5.083h4.199q1.349.0 2.045-.684.696-.685.696-1.919m16.785 11.94-1.36-4.399h-5.841l-1.359 4.399h-3.209L75.386.0h3.785l5.569 17.219zM77.278 2.651l-.066.269q-.109.44-.261 1.002c-.152.563-.725 2.436-1.871 6.184h4.405l-1.512-4.949-.468-1.662zm9.551 14.567V0h3.209v17.219zm15.53.0L95.681 3.959q.196 1.931.196 3.104v10.155h-2.849V0h3.666l6.777 13.37q-.196-1.846-.196-3.361V0h2.85v17.219zM52.63 39.375V28.331q.011-.351.115-3.015-.818 3.257-1.209 4.541l-2.925 9.518h-2.418l-2.925-9.518-1.232-4.541q.139 2.809.139 3.717v10.342h-3.017V22.313h4.548l2.902 9.543.253.92.553 2.289.725-2.736 2.983-10.015h4.526v17.063zm17.64.0-1.44-4.359h-6.184l-1.44 4.359h-3.397l5.919-17.063h4.007l5.896 17.063zm-4.537-14.434-.069.267q-.115.436-.277.993c-.162.557-.767 2.414-1.98 6.128h4.663l-1.601-4.905-.495-1.647zm24.577 5.776q0 2.64-.99 4.614-.979 1.961-2.787 3.003-1.796 1.042-4.122 1.042h-6.564V22.313h5.873q4.099.0 6.345 2.18 2.245 2.167 2.245 6.224m-3.42.0q0-2.748-1.359-4.19-1.359-1.453-3.881-1.453h-2.407v11.54h2.879q2.188.0 3.478-1.586t1.29-4.311m6 8.659V22.313h12.759v2.761h-9.362v4.287h8.66v2.761h-8.66v4.492h9.835v2.761zm15.75.0v-3.693h3.328v3.693zm12.445-12.149q2.082.0 3.662.781 1.58.78 2.422 2.235.833 1.454.833 3.393.0 2.98-1.845 4.676Q124.302 40 121.085 40q-3.208.0-5.005-1.688-1.798-1.688-1.798-4.695c0-3.007.606-3.57 1.817-4.694q1.817-1.696 4.986-1.696m0 2.702q-2.157.0-3.378.97-1.23.97-1.23 2.72.0 1.777 1.22 2.747 1.211.97 3.388.97 2.195.0 3.462-.988 1.258-.997 1.258-2.711.0-1.778-1.23-2.738-1.23-.97-3.491-.97m6.725-13.402-5.062 2.935v3.107h5.062v2.648h-13.331v-6.322q0-2.261 1.031-3.491 1.022-1.23 2.942-1.23 1.4.0 2.422.754 1.012.754 1.334 2.038l5.601-3.42zm-9.244.314q-1.92.0-1.921 2.334v3.393h3.936v-3.465q0-1.113-.53-1.688t-1.486-.575m7.249-10.915a6.5 6.5.0 00-.313-2.002q-.321-.969-.814-1.499h-1.845v3.088h-2.063V0h4.901q1.088 1.005 1.703 2.622a9.4 9.4.0 01.615 3.375q0 3.088-1.798 4.748-1.808 1.661-5.119 1.661-3.292.0-5.043-1.67-1.76-1.67-1.76-4.803.0-4.452 3.473-5.664l.776 2.442q-1.012.395-1.533 1.238-.52.844-.52 1.984.0 1.867 1.192 2.837t3.416.97q2.261.0 3.501-.997 1.23-1.005 1.23-2.818z"/></svg></abbr></a></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2026 <a href=https://chiehting.com/>Chiehting's Blog</a>
&#183; Copyright © 2025 Chiehting Lee. All rights reserved.</p></footer><script async src=https://chiehting.com/js/bundle.min.217d62397cbef6f9f5d8bab30d7e7969d78c52a436ca5d5790cef4d6fef3f1f2.js integrity="sha256-IX1iOXy+9vn12LqzDX55adeMUqQ2yl1XkM701v7z8fI=" crossorigin=anonymous></script><script async src=https://chiehting.com/js/link-share.min.24409a4f6e5537d70ffc55ec8f9192208d718678cb8638585342423020b37f39.js integrity="sha256-JECaT25VN9cP/FXsj5GSII1xhnjLhjhYU0JCMCCzfzk=" crossorigin=anonymous></script></body></html>